<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>Requirement ‚Üí Testcases ‚Ä¢ Agentic RAG</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg sticky-top px-3">
        <a class="navbar-brand text-white fw-bold" href="/">üìä Agentic RAG</a>
        <div class="ms-auto d-flex align-items-center">
            <a href="/" class="nav-link text-white">Home</a>
            <a href="/upload" class="nav-link text-white">Upload File</a>
            <a href="/query" class="nav-link text-white">Ask Question</a>
            <a href="/visuals" class="nav-link text-white">Visuals</a>
            <a href="/ml" class="nav-link text-white">ML</a>
            <!-- REQ‚ÜíTC EXTENSION NAV LINK -->
            <a href="/req2tc" class="nav-link text-white active-link">Req ‚Üí TC</a>
        </div>
    </nav>

    <div class="container mt-4">
        {% if error %}
        <div class="alert alert-danger">{{ error }}</div>
        {% endif %}
        {% if status_message %}
        <div class="alert alert-success">{{ status_message }}</div>
        {% endif %}

        <div class="row g-4">
            <!-- Upload and index mapping -->
            <div class="col-md-5">
                <div class="card p-4">
                    <h3 class="mb-3">1Ô∏è‚É£ Upload old requirements + testcases</h3>
                    <p class="text-muted">
                        Upload an Excel/CSV with columns <code>Requirement</code> and <code>TestCase</code>.
                        Multiple rows can share the same Requirement (for multiple testcases).
                    </p>
                    <form method="post" enctype="multipart/form-data">
                        <input type="hidden" name="action" value="index">
                        <div class="mb-3">
                            <label class="form-label">Mapping file</label>
                            <input type="file" name="mapping_file" class="form-control" accept=".xlsx,.xls,.csv"
                                required>
                        </div>
                        <button type="submit" class="btn btn-primary">Index examples</button>
                    </form>
                </div>
            </div>

            <!-- Generate testcases -->
            <div class="col-md-7">
                <div class="card p-4">
                    <h3 class="mb-3">2Ô∏è‚É£ Generate testcases for a new requirement</h3>
                    <form method="post">
                        <input type="hidden" name="action" value="generate">
                        <div class="mb-3">
                            <label class="form-label">New requirement</label>
                            <textarea name="new_requirement" class="form-control" rows="4"
                                placeholder="Describe the new requirement in detail..."></textarea>
                        </div>
                        <button type="submit" class="btn btn-success">Generate testcases</button>
                    </form>

                    {% if generated %}
                    <hr>
                    <h5>Generated testcases (plain text)</h5>
                    <textarea class="form-control" rows="12" readonly
                        style="font-family: Consolas, monospace;">{{ generated }}</textarea>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>